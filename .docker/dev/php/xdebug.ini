; ============================================
; Xdebug 3 Configuration (Development)
; Optimized for code coverage, NOT step debugging
; ============================================

; Mode: coverage only (fast, no performance impact on normal development)
; Options: off, develop, coverage, debug, gcstats, profile, trace
xdebug.mode=coverage

; Disable step debugging by default (keeps development fast)
; To enable debugging, change mode to: xdebug.mode=debug,coverage
xdebug.start_with_request=no

; Client configuration (for debugging if enabled later)
xdebug.client_host=host.docker.internal
xdebug.client_port=9003

; Log configuration (useful for troubleshooting)
xdebug.log=/tmp/xdebug.log
xdebug.log_level=3

; Coverage settings
xdebug.coverage_enable=1

; Performance: Only trigger on coverage requests
; This ensures normal page loads and CLI commands stay fast
xdebug.trigger_value=yes

; ============================================
; How to use:
; ============================================
;
; 1. Generate coverage report:
;    docker compose exec php vendor/bin/phpunit --coverage-html coverage/
;
; 2. Generate coverage for CI (clover format):
;    docker compose exec php vendor/bin/phpunit --coverage-clover coverage.xml
;
; 3. Check if Xdebug is loaded:
;    docker compose exec php php -v | grep -i xdebug
;
; 4. Enable step debugging (temporary):
;    Change: xdebug.mode=coverage
;    To: xdebug.mode=debug,coverage
;    Then: docker compose restart php
;
; ============================================
